<!doctype html>
<html>
  <head>
    <% include header0.ejs %>
    <link href="docs/css/bootstrap.min.css" rel="stylesheet">
    <link href="docs/css/highlight.css" rel="stylesheet">
    <link href="dist/css/bootstrap3/bootstrap-switch.css" rel="stylesheet">
    <link href="http://getbootstrap.com/assets/css/docs.min.css" rel="stylesheet">
    <link href="docs/css/main.css" rel="stylesheet">
    <!--Scripts-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  	<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

    <script  type="text/javascript" src="typeahead.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
        $('#myagence').typeahead({
            hint: true,
            highlight: true,
            minLength: 1,
            name: 'users',
            remote: 'http://localhost:8080/search_agence?key=%QUERY',
        });
      });
    </script>



    <style>
      .twitter-typeahead, .tt-hint { width: 100%; }
      .tt-dropdown-menu {
        width:100%;
      }
      .twitter-typeahead .tt-query, .twitter-typeahead .tt-hint {
      margin-bottom: 0;
      }
      .twitter-typeahead .tt-hint {
      display: block;
      height: 34px;
      padding: 6px 12px;
      font-size: 14px;
      line-height: 1.428571429;
      border: 1px solid transparent;
      border-radius:4px;
      }
      .twitter-typeahead .hint-small {
      height: 30px;
      padding: 5px 10px;
      font-size: 12px;
      border-radius: 3px;
      line-height: 1.5;
      }
      .twitter-typeahead .hint-large {
      height: 45px;
      padding: 10px 16px;
      font-size: 18px;
      border-radius: 6px;
      line-height: 1.33;
      }
      .tt-dropdown-menu {
      min-width: 160px;
      margin-top: 2px;
      padding: 5px 0;
      background-color: #fff;
      border: 1px solid #ccc;
      border: 1px solid rgba(0, 0, 0, .2);
      *border-right-width: 2px;
      *border-bottom-width: 2px;
      -webkit-border-radius: 6px;
      -moz-border-radius: 6px;
      border-radius: 6px;
      -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
      -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
      box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
      -webkit-background-clip: padding-box;
      -moz-background-clip: padding;
      background-clip: padding-box;
      }
      .tt-suggestion {
      display: block;
      padding: 3px 20px;
      }
      .tt-suggestion.tt-is-under-cursor {
      color: #fff;
      background-color: #0081c2;
      background-image: -moz-linear-gradient(top, #0088cc, #0077b3);
      background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0077b3));
      background-image: -webkit-linear-gradient(top, #0088cc, #0077b3);
      background-image: -o-linear-gradient(top, #0088cc, #0077b3);
      background-image: linear-gradient(to bottom, #0088cc, #0077b3);
      background-repeat: repeat-x;
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0088cc', endColorstr='#ff0077b3', GradientType=0)
      }
      .tt-suggestion.tt-is-under-cursor a {
      color: #fff;
      }
      .tt-suggestion p {
      margin: 0;
      }
    </style>
  </head>

  <!--Body-->

  <body>
    <div class="container">
      <div class="col-md-5 col-md-offset-4">
        <div class="form-area">

          <!--Form-->
          <form role="form" action="/data_chercher_agence" method="POST" >
            <br>
              <div class="text-center">
                <h2><span class="glyphicon glyphicon-refresh"></span> Chercher une agence </h2>
                <br>
              </div>
            <br>
            <div class="form-group">
              <input type="text" id='myagence' name="agence" class="typeahead form-control" placeholder="Agence" />
            </div>

    			  <button type="submit" class="btn btn-primary pull-right" ><span class="glyphicon glyphicon-ok-sign"></span> Chercher </button>




          </form>
        </div>
      </div>
    </div>
  <br>
  <br>
  <br>

  <div class="container">

    <table  class = "table table-hover table-bordered text-center" id="myTable">
  		<div class="text-center">
  			<tr>
          <th> id </th>
  			<th>  Nom  </th>
  			<th>  Adresse </th>
  			</tr>
  	</div>
  		<% rows.forEach(function(agence){ %>
  			<tr >
  				<td ><span id = 'id'> <%=agence.idAgence%>  </span> </td>
          <td ><div contenteditable><span id = 'nom'> <%=agence.nom%>  </span> </div></td>
  				<td> <div contenteditable><span id = 'adresse'> <%=agence.adresse%> </span> </div> </td>

  			</tr>

  			<%})%>
  	</table>

<p data-toggle="tooltip" title="su"><button type="button" class="btn btn-danger pull-right"data-toggle="modal" data-target="#delete">Modifier</button></p>

<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
  <div class="modal-dialog">
<div class="modal-content">
      <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
    <h4 class="modal-title custom_align" id="Heading"> Confirmer cette entrée </h4>
  </div>
      <div class="modal-body">

   <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Merci de confirmer votre saisie </div>

  </div>
    <div class="modal-footer ">
    <button type="button" class="btn btn-success" onclick='modif()' ><span class="glyphicon glyphicon-ok-sign" ></span> Confirmer </button>
    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Vérifier </button>
  </div>
  </div>
<!-- /.modal-content -->
</div>
  <!-- /.modal-dialog -->
</div>

</div>

            <script>
        function modif(){

        		$.ajax({
        			url: 'http://localhost:8080/modifier_agence',
        			data : {
        			nom : $( '#nom' ).html(),
        			adresse : $( '#adresse' ).html(),
              id : $( '#id' ).html()
        				},

        			success : function (data) {
                $(location).attr('href','/confirmation');
        				console.log(data)
        	}
        });
        };
        </script>



    <script src="docs/js/highlight.js"></script>
    <script src="dist/js/bootstrap-switch.js"></script>
    <script src="docs/js/main.js"></script>


  </body>
</html>
